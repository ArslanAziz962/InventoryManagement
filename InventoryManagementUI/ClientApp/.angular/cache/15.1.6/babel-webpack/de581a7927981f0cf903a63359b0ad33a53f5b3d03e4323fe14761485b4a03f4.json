{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/product/product.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/common\";\nfunction ProductListComponent_p_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\")(1, \"em\");\n    i0.ɵɵtext(2, \"Loading...\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction ProductListComponent_h3_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"h3\", 7);\n    i0.ɵɵtext(1, \"Error to fetch Data\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ProductListComponent_h3_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"h3\", 7);\n    i0.ɵɵtext(1, \"No Records found\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ProductListComponent_table_9_tr_14_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r7 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"td\");\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"td\")(10, \"button\", 10);\n    i0.ɵɵlistener(\"click\", function ProductListComponent_table_9_tr_14_Template_button_click_10_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r7);\n      const p_r5 = restoredCtx.$implicit;\n      const ctx_r6 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r6.editProduct(p_r5));\n    });\n    i0.ɵɵtext(11, \"Edit\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"button\", 11);\n    i0.ɵɵlistener(\"click\", function ProductListComponent_table_9_tr_14_Template_button_click_12_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r7);\n      const p_r5 = restoredCtx.$implicit;\n      const ctx_r8 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r8.deleteProduct(p_r5.productId.toString()));\n    });\n    i0.ɵɵtext(13, \"Delete\");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const p_r5 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(p_r5.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(p_r5.description);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(p_r5.price);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(p_r5.quantity);\n  }\n}\nfunction ProductListComponent_table_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"table\", 8)(1, \"thead\")(2, \"tr\")(3, \"th\");\n    i0.ɵɵtext(4, \"Name\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"th\");\n    i0.ɵɵtext(6, \"Description\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"th\");\n    i0.ɵɵtext(8, \"Price\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"th\");\n    i0.ɵɵtext(10, \"Quantity\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"th\");\n    i0.ɵɵtext(12, \"Action\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(13, \"tbody\");\n    i0.ɵɵtemplate(14, ProductListComponent_table_9_tr_14_Template, 14, 4, \"tr\", 9);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(14);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r3.products);\n  }\n}\nconst _c0 = function () {\n  return [\"/add-product\"];\n};\nexport class ProductListComponent {\n  constructor(productService, router) {\n    this.productService = productService;\n    this.router = router;\n    this.isLoading = true;\n    this.products = [];\n    this.isError = false;\n    this.getAllProducts();\n  }\n  getAllProducts() {\n    this.subscription = this.productService.getAllProducts().subscribe({\n      next: response => {\n        console.log('products:', response);\n        this.products = response;\n        this.isLoading = false;\n      },\n      error: error => {\n        this.isError = true;\n        this.isLoading = false;\n        console.error('error when getting products:', error);\n      }\n    });\n  }\n  deleteProduct(id) {\n    if (window.confirm(`Are you sure you want to delete product with ID: ${id}?`)) {\n      // Delete the product\n      console.log('product id:', id);\n      this.deleteSubscription = this.productService.deleteProduct(id).subscribe({\n        next: response => {\n          this.getAllProducts();\n        },\n        error: error => {\n          console.error('error when deleting product ', error);\n        }\n      });\n    }\n  }\n  editProduct(p) {\n    this.router.navigate(['/add-product', p]);\n  }\n  ngOnDestroy() {\n    this.subscription?.unsubscribe();\n    this.deleteSubscription?.unsubscribe();\n  }\n}\nProductListComponent.ɵfac = function ProductListComponent_Factory(t) {\n  return new (t || ProductListComponent)(i0.ɵɵdirectiveInject(i1.ProductService), i0.ɵɵdirectiveInject(i2.Router));\n};\nProductListComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: ProductListComponent,\n  selectors: [[\"app-product-list\"]],\n  decls: 10,\n  vars: 6,\n  consts: [[1, \"container\"], [1, \"mt-3\"], [1, \"d-flex\", \"justify-content-end\", \"mt-3\"], [1, \"btn\", \"btn-primary\", 3, \"routerLink\"], [4, \"ngIf\"], [\"class\", \"text-center text-danger\", 4, \"ngIf\"], [\"class\", \"table table-striped\", \"aria-labelledby\", \"tableLabel\", 4, \"ngIf\"], [1, \"text-center\", \"text-danger\"], [\"aria-labelledby\", \"tableLabel\", 1, \"table\", \"table-striped\"], [4, \"ngFor\", \"ngForOf\"], [1, \"btn\", \"btn-primary\", 3, \"click\"], [1, \"btn\", \"btn-danger\", \"mx-3\", 3, \"click\"]],\n  template: function ProductListComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"h1\", 1);\n      i0.ɵɵtext(2, \"Product List\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(3, \"div\", 2)(4, \"a\", 3);\n      i0.ɵɵtext(5, \" Add Product\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵtemplate(6, ProductListComponent_p_6_Template, 3, 0, \"p\", 4);\n      i0.ɵɵtemplate(7, ProductListComponent_h3_7_Template, 2, 0, \"h3\", 5);\n      i0.ɵɵtemplate(8, ProductListComponent_h3_8_Template, 2, 0, \"h3\", 5);\n      i0.ɵɵtemplate(9, ProductListComponent_table_9_Template, 15, 1, \"table\", 6);\n      i0.ɵɵelementEnd();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction0(5, _c0));\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", ctx.isLoading && !ctx.isError);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.isError);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", !ctx.isLoading && !ctx.isError && ctx.products.length <= 0);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.products.length && !ctx.isError);\n    }\n  },\n  dependencies: [i3.NgForOf, i3.NgIf, i2.RouterLink],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"mappings":"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","names":["i0","p_r5","ProductListComponent","constructor","productService","router","products","isError","getAllProducts","subscription","subscribe","next","response","console","log","isLoading","error","deleteProduct","id","window","confirm","deleteSubscription","editProduct","p","navigate","ngOnDestroy","unsubscribe","selectors","decls","vars","consts","template"],"sourceRoot":"","sources":["E:\\csharp projects\\InventoryManagement\\InventoryManagementUI\\ClientApp\\src\\app\\product-list\\product-list.component.html","E:\\csharp projects\\InventoryManagement\\InventoryManagementUI\\ClientApp\\src\\app\\product-list\\product-list.component.ts"],"sourcesContent":["<div class=\"container\">\n  <h1 class=\"mt-3\">Product List</h1>\n  <div class=\"d-flex justify-content-end mt-3\">\n    <a [routerLink]=\"['/add-product']\" class=\"btn btn-primary\"> Add Product</a>\n  </div>\n\n  <p *ngIf=\"isLoading && !isError\"><em>Loading...</em></p>\n\n  <h3 *ngIf=\"isError\" class=\"text-center text-danger\">Error to fetch Data</h3>\n  <h3 *ngIf=\"!isLoading && !isError  && products.length<=0\" class=\"text-center text-danger\">No Records found</h3>\n\n\n  <table class='table table-striped' aria-labelledby=\"tableLabel\" *ngIf=\"products.length && !isError\">\n    <thead>\n      <tr>\n        <th>Name</th>\n        <th>Description</th>\n        <th>Price</th>\n        <th>Quantity</th>\n        <th>Action</th>\n      </tr>\n    </thead>\n    <tbody>\n      <tr *ngFor=\"let p of products\">\n        <td>{{ p.name }}</td>\n        <td>{{ p.description }}</td>\n        <td>{{ p.price }}</td>\n        <td>{{ p.quantity }}</td>\n        <td>\n\n          <button class=\"btn btn-primary\" (click)=\"editProduct(p)\">Edit</button>\n          <button class=\"btn btn-danger mx-3\" (click)=\"deleteProduct(p.productId.toString())\">Delete</button>\n\n        </td>\n      </tr>\n    </tbody>\n  </table>\n\n</div>\n","import { Component, OnDestroy } from '@angular/core';\nimport { Router } from '@angular/router';\r\nimport { Subscription } from 'rxjs';\r\nimport { Product } from '../../models/Product';\r\nimport { ProductService } from '../../services/product/product.service';\r\n\n@Component({\n  selector: 'app-product-list',\n  templateUrl: './product-list.component.html',\n  styleUrls: ['./product-list.component.css']\n})\nexport class ProductListComponent implements OnDestroy {\n\n  products: Product[];\n  subscription?: Subscription;\n  deleteSubscription?: Subscription;\n  isError: boolean;\n  isLoading: boolean = true;\n  constructor(private productService: ProductService, private router: Router) {\n    this.products = [];\r\n    this.isError = false;\r\n    this.getAllProducts();\r\n  }\n\n  getAllProducts() {\r\n\r\n    this.subscription = this.productService.getAllProducts().subscribe({\r\n      next: (response) => {\r\n        console.log('products:', response);\r\n        this.products = response;\r\n        this.isLoading = false;\r\n      },\r\n      error: (error) => {\r\n        this.isError = true;\r\n        this.isLoading = false;\r\n\r\n        console.error('error when getting products:', error)\r\n      }\r\n    })\r\n\r\n\r\n  }\n\n\n  deleteProduct(id: string) {\n\n    if (window.confirm(`Are you sure you want to delete product with ID: ${id}?`)) {\r\n      // Delete the product\r\n\r\n      console.log('product id:', id)\r\n      this.deleteSubscription = this.productService.deleteProduct(id).subscribe({\r\n        next: (response) => {\r\n          this.getAllProducts();\r\n        },\r\n        error: (error) => {\r\n          console.error('error when deleting product ', error);\r\n        }\r\n      })\r\n    }\n    \r\n  }\n\n  editProduct(p: Product) {\n    this.router.navigate(['/add-product',p])\r\n  }\n\n  ngOnDestroy(): void {\r\n    this.subscription?.unsubscribe();\r\n    this.deleteSubscription?.unsubscribe();\r\n    }\r\n  \n\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}